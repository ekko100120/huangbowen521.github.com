<h2>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</h2>

<p>layout: post
title: 升级ruby版本那&#8221;不堪回首的经历&#8221;
date: 2013-09-23 13:53
comments: true
categories: 编程开发</p>

<h2>tags: [Ruby]</h2>

<hr />

<p>&lt;?xml version=&ldquo;1.0&rdquo; encoding=&ldquo;utf-8&rdquo;?>
<feed xmlns="http://www.w3.org/2005/Atom"></p>

<p>  <title>&lt;![CDATA[Tag: ruby | 黄博文的地盘]]></title>
  <link href="http://www.huangbowen.net/blog/tags/ruby/atom.xml" rel="self"/>
  <link href="http://www.huangbowen.net/"/>
  <updated>2014-12-31T17:09:42+08:00</updated>
  <id><a href="http://www.huangbowen.net/">http://www.huangbowen.net/</a></id>
  <author>
    <name>&lt;![CDATA[黄博文]]></name>
    <email>&lt;![CDATA[<a href="&#x6d;&#97;&#105;&#108;&#x74;&#111;&#x3a;&#x68;&#x75;&#97;&#x6e;&#x67;&#x62;&#111;&#x77;&#x65;&#110;&#x35;&#50;&#x31;&#x40;&#103;&#109;&#97;&#105;&#x6c;&#x2e;&#99;&#x6f;&#109;">&#x68;&#x75;&#97;&#x6e;&#x67;&#98;&#x6f;&#119;&#x65;&#110;&#x35;&#50;&#x31;&#64;&#103;&#x6d;&#x61;&#x69;&#108;&#x2e;&#99;&#x6f;&#x6d;</a>]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator></p>

<p>  <entry>
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
    <title type="html">&lt;![CDATA[升级ruby版本那&#8221;不堪回首的经历&#8221;]]></title>
    <link href="http://www.huangbowen.net/blog/2013/09/23/not-easy-to-install-ruby/"/>
    <updated>2013-09-23T13:53:00+08:00</updated>
    <id><a href="http://www.huangbowen.net/blog/2013/09/23/not-easy-to-install-ruby">http://www.huangbowen.net/blog/2013/09/23/not-easy-to-install-ruby</a></id>
    <content type="html">&lt;![CDATA[<p>前段时间在玩Chef-一个IT基础设施自动化工具。由于Chef是由Ruby写的一个gem，那么就需要安装Ruby。当然Ruby我早就安装了，并且使用rvm来管理Ruby及Gem。本来一切看似正常，但是不会预料后面会遇到那么多的坑。</p></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>前段时间在玩Chef-一个IT基础设施自动化工具。由于Chef是由Ruby写的一个gem，那么就需要安装Ruby。当然Ruby我早就安装了，并且使用rvm来管理Ruby及Gem。本来一切看似正常，但是不会预料后面会遇到那么多的坑。</p>

<!-- more -->


<p>Chef本地的repo包中有一个vagrant虚拟机的模板文件，通过它可以setup一个虚拟机，然后使用Chef来操作这个节点。那么就使用vagrant命令来setup这个虚拟机把。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>vagrant up --no-color
</span><span class='line'>Vagrant failed to initialize at a very early stage:
</span><span class='line'>
</span><span class='line'>It appears that you<span class="s1">&#39;ve ran a newer version of Vagrant on this</span>
</span><span class='line'><span class="s1">computer. Unfortunately, newer versions of Vagrant change internal</span>
</span><span class='line'><span class="s1">directory layouts that cause older versions to break. This version</span>
</span><span class='line'><span class="s1">of Vagrant cannot properly run.</span>
</span><span class='line'>
</span><span class='line'><span class="s1">If you&#39;</span>d like to start from a clean state, please remove the
</span><span class='line'>Vagrant state directory: /Users/twer/.vagrant.d
</span><span class='line'>
</span><span class='line'>Warning that this will remove all your boxes and potentially corrupt
</span><span class='line'>existing Vagrant environments that were running based on the future
</span><span class='line'>version.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>console中说Vagrant版本有问题，那么就按说明删除.vagrant.d文件夹把。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>rm -rf ~/.vagrant.d/
</span><span class='line'><span class="nv">$ </span>vagrant up --no-color
</span><span class='line'>/Users/twer/sourcecode/chef-repo/Vagrantfile:8:in <span class="sb">`</span>&lt;top <span class="o">(</span>required<span class="o">)</span>&gt;<span class="s1">&#39;: undefined method `configure&#39;</span> <span class="k">for </span>Vagrant:Module <span class="o">(</span>NoMethodError<span class="o">)</span>
</span><span class='line'>     from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config/loader.rb:115:in <span class="sb">`</span>load<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">     from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config/loader.rb:115:in `block in procs_for_source&#39;</span>
</span><span class='line'>     from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config.rb:41:in <span class="sb">`</span>block in capture_configures<span class="err">&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>窝里个去，又出新问题了。那好吧，看看当前ruby的版本。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'><span class="nv">$ </span>rm -rf ~/.vagrant.d/
</span><span class='line'><span class="nv">$ </span>vagrant up --no-color
</span><span class='line'>/Users/twer/sourcecode/chef-repo/Vagrantfile:8:in <span class="sb">`</span>&amp;lt;top <span class="o">(</span>required<span class="o">)</span>&amp;gt;<span class="s1">&#39;: undefined method `configure&#39;</span> <span class="k">for </span>Vagrant:Module <span class="o">(</span>NoMethodError<span class="o">)</span>
</span><span class='line'>     from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config/loader.rb:115:in <span class="sb">`</span>load<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">     from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config/loader.rb:115:in `block in procs_for_source&#39;</span>
</span><span class='line'>     from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/vagrant-1.0.7/lib/vagrant/config.rb:41:in <span class="sb">`</span>block in capture_configures<span class="err">&#39;</span>
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;窝里个去，又出新问题了。那好吧，看看当前ruby的版本。&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>rvm list
</span><span class='line'>
</span><span class='line'>rvm rubies
</span><span class='line'>
</span><span class='line'>   ruby-1.9.2-p320 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'><span class="o">=</span>* ruby-1.9.3-p194 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span><span class='line'><span class="c"># =&gt; - current</span>
</span><span class='line'><span class="c"># =* - current &amp;&amp; default</span>
</span><span class='line'><span class="c">#  * - default</span>
</span></code></pre></td></tr></table></div></figure>


<hr />

<h1>=&gt; - current</h1>

<h1>=* - current &amp;&amp; default</h1>

<h1>* - default</h1>

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>试着将Ruby的版本切换到1.9.2-p320再试试。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>rvm use ruby-1.9.2-p320
</span><span class='line'>Using /usr/local/rvm/gems/ruby-1.9.2-p320
</span><span class='line'><span class="nv">$ </span>vagrant up
</span><span class='line'>Bringing machine <span class="s1">&#39;default&#39;</span> up with <span class="s1">&#39;virtualbox&#39;</span> provider...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Setting the name of the VM...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Clearing any previously <span class="nb">set </span>forwarded ports...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Creating shared folders metadata...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Clearing any previously <span class="nb">set </span>network interfaces...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Preparing network interfaces based on configuration...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Forwarding ports...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> -- <span class="nv">22</span> <span class="o">=</span>&amp;gt; 2222 <span class="o">(</span>adapter 1<span class="o">)</span>
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Booting VM...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Waiting <span class="k">for </span>VM to boot. This can take a few minutes.
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> VM booted and ready <span class="k">for </span>use!
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Setting hostname...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Mounting shared folders...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> -- /vagrant
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<h1>搞定。看来问题是当前使用的ruby的版本有问题。</h1>

<p></code></pre></p>

<p>搞定。看来问题是当前使用的ruby的版本有问题。</p>


<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>老是使用旧版本也不是个事，把Ruby升级到最新版本看还有这个问题不。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>rvm list known
</span><span class='line'><span class="c"># MRI Rubies</span>
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>1.8.6<span class="o">[</span>-p420<span class="o">]</span>
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>1.8.7<span class="o">[</span>-p374<span class="o">]</span>
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>1.9.1<span class="o">[</span>-p431<span class="o">]</span>
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>1.9.2<span class="o">[</span>-p320<span class="o">]</span>
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>1.9.3<span class="o">[</span>-p448<span class="o">]</span>
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>2.0.0-p195
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>2.0.0<span class="o">[</span>-p247<span class="o">]</span>
</span><span class='line'><span class="o">[</span>ruby-<span class="o">]</span>2.0.0-head
</span><span class='line'>ruby-head
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>看来ruby的1.9.3已经有p448了，那么就升级到p448。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>rvm install 1.9.3
</span><span class='line'>Checking requirements <span class="k">for </span>osx.
</span><span class='line'>Installing requirements <span class="k">for </span>osx.
</span><span class='line'>Updating system.
</span><span class='line'>Installing required packages: libksba, openssl..........
</span><span class='line'>Error running <span class="s1">&#39;requirements_osx_brew_libs_install gcc libksba openssl&#39;</span>,
</span><span class='line'>please <span class="nb">read</span> /usr/local/rvm/log/1379843991_ruby-1.9.3-p448/package_install_gcc_libksba_openssl.log
</span><span class='line'>Requirements installation failed with status: 1.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>升级失败，那么看看log。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">==</span>&gt; make <span class="nv">bootstrap</span>
</span><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'><span class="o">==</span>&amp;gt; make bootstrap
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>configure: error: cannot compute suffix of object files: cannot compile
</span><span class='line'>See <span class="sb">`</span>config.log<span class="err">&#39;</span> <span class="k">for </span>more details.
</span><span class='line'>make<span class="o">[</span>2<span class="o">]</span>: *** <span class="o">[</span>configure-stage1-target-libgcc<span class="o">]</span> Error 1
</span><span class='line'>make<span class="o">[</span>1<span class="o">]</span>: *** <span class="o">[</span>stage1-bubble<span class="o">]</span> Error 2
</span><span class='line'>make: *** <span class="o">[</span>bootstrap<span class="o">]</span> Error 2
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span><span class='line'>
</span><span class='line'>READ THIS: https://github.com/mxcl/homebrew/wiki/troubleshooting
</span><span class='line'>
</span><span class='line'>There were package installation errors, make sure to <span class="nb">read </span>the log.
</span><span class='line'>
</span><span class='line'>Try <span class="sb">`</span>brew tap --repair<span class="sb">`</span> and make sure <span class="sb">`</span>brew doctor<span class="sb">`</span> looks reasonable.
</span></code></pre></td></tr></table></div></figure>


<h1>通过看log是gcc编译失败，并且通过log可以看出rvm是通过homebrew来安装必备文件的。</h1>

<p>READ THIS: <a href="https://github.com/mxcl/homebrew/wiki/troubleshooting">https://github.com/mxcl/homebrew/wiki/troubleshooting</a></p>

<p>There were package installation errors, make sure to read the log.</p>

<p>Try <code>brew tap --repair</code> and make sure <code>brew doctor</code> looks reasonable.
</code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>通过一番查资料后，找到了解决办法。那就是将Xcode升级到最新版本，然后在Preference里选择Downloads标签，然后安装Command Line Tools。</p>

<p><img src="/images/developerTools.png" width="600"></p>

<p>安装完毕后再用Homebrew安装gcc49。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>brew install <span class="nv">gcc49</span>
</span><span class='line'><span class="o">==</span>&gt; Downloading ftp://gcc.gnu.org/pub/gcc/snapshots/4.9-20130915/gcc-4.9-20130915.tar.bz2
</span><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'><span class="nv">$ </span>brew install <span class="nv">gcc49</span>
</span><span class='line'><span class="o">==</span>&amp;gt; Downloading ftp://gcc.gnu.org/pub/gcc/snapshots/4.9-20130915/gcc-4.9-20130915.tar.bz2
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>Already downloaded: /Library/Caches/Homebrew/gcc49-4.9-20130915.tar.bz2
</span><span class='line'><span class="o">==</span>&amp;gt; ../configure --build<span class="o">=</span>x86_64-apple-darwin12.5.0 --prefix<span class="o">=</span>/usr/local/Cellar/gcc49/4.9-20130915/gcc
</span><span class='line'><span class="o">==</span>&amp;gt; make <span class="nv">bootstrap</span>
</span><span class='line'><span class="o">==</span>&amp;gt; make <span class="nv">install</span>
</span><span class='line'><span class="o">==</span>&amp;gt; Caveats
</span><span class='line'>This is a snapshot of GCC trunk, which is in active development and
</span><span class='line'>supposed to have bugs and should not be used in production
</span><span class='line'>environment.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span><span class='line'><span class="o">==</span>&gt; Summary
</span><span class='line'>🍺  /usr/local/Cellar/gcc49/4.9-20130915: 977 files, 93M, built in 21.6 minutes
</span></code></pre></td></tr></table></div></figure>


<hr />

<p>==&gt; Summary
🍺  /usr/local/Cellar/gcc49/4.9-20130915: 977 files, 93M, built in 21.6 minutes
</code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>成功安装GCC。</p>

<p>继续回到安装Ruby的任务上来。由于在安装Ruby前会先安装必备文件，那么干脆直接先安装必备文件的了。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>rvm requirements
</span><span class='line'>Checking requirements <span class="k">for </span>osx.
</span><span class='line'>Installing requirements <span class="k">for </span>osx.
</span><span class='line'>mkdir: /usr/local/rvm/log/1379829979_ruby-1.9.3-p448: Permission denied
</span><span class='line'>tee: /usr/local/rvm/log/1379829979_ruby-1.9.3-p448/update_system.log: No such file or directory
</span><span class='line'>tee: /usr/local/rvm/log/1379829979_ruby-1.9.3-p448/update_system.log: No such file or directory
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<hr />

<pre><code>&lt;title type="html"&gt;&lt;![CDATA[避免每次输入bundler exec命令]]&gt;&lt;/title&gt;
&lt;link href="http://www.huangbowen.net/blog/2013/02/04/bi-mian-mei-ci-shu-ru-bundler-execming-ling/"/&gt;
&lt;updated&gt;2013-02-04T00:24:00+08:00&lt;/updated&gt;
&lt;id&gt;http://www.huangbowen.net/blog/2013/02/04/bi-mian-mei-ci-shu-ru-bundler-execming-ling&lt;/id&gt;
&lt;content type="html"&gt;&lt;![CDATA[&lt;p&gt;bundle在ruby的世界里是个好东西，它可以用来管理应用程序的依赖库。它能自动的下载和安装指定的gem，也可以随时更新指定的gem。&lt;/p&gt;
</code></pre>

<p><a href="https://rvm.io/">rvm</a>则是一个命令行工具，能帮助你轻松的安装，管理多个ruby环境。每个环境可以指定一系列的gem。它允许你为每一个项目指定其ruby的版本，需要的gem的版本。这能最大限度的避免由于ruby环境的差异，或者不同版本的gem造成的各种问题。</p>




<p>当我在项目中引入了rvm后，使用rake命令时，每次都会出现这样的异常。</p>




<pre><code class="bash">rake aborted!
You have already activated rake 10.0.0, but your Gemfile requires rake 0.9.2.2. Using bundle exec may solve this.
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:31:in `block in setup'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/runtime.rb:17:in `setup'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler.rb:116:in `setup'
/usr/local/rvm/gems/ruby-1.9.3-p194/gems/bundler-1.2.3/lib/bundler/setup.rb:7:in `&lt;top (required)&gt;'
/Users/twer/sourcecode/octopress/Rakefile:2:in `&lt;top (required)&gt;'
(See full trace by running task with --trace)
>>>>>>> 09615b67c1384817f01948313cc9bfa79d82b402:blog/tags/ruby/atom.xml
</code></pre>


<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>我勒个去，貌似是权限问题，那么用sudo解决。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/<em>posts/2013-09-23-not-easy-to-install-ruby.markdown
&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/</em>posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo rvm <span class="nv">requirements</span>
</span><span class='line'>
</span><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'><span class="nv">$ </span>sudo rvm requirements
</span><span class='line'>
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>Checking requirements <span class="k">for </span>osx.
</span><span class='line'>Installing requirements <span class="k">for </span>osx.
</span><span class='line'>Updating system.
</span><span class='line'>Installing required packages: libksba, openssl..........
</span><span class='line'>Error running <span class="s1">&#39;requirements_osx_brew_libs_install libksba openssl&#39;</span>,
</span><span class='line'>please <span class="nb">read</span> /usr/local/rvm/log/1379843991_ruby-1.9.3-p448/package_install_libksba_openssl.log
</span><span class='line'>Requirements installation failed with status: 1.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>又失败，看看错误日志吧。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>current path: /Users/twer
</span><span class='line'><span class="nb">command</span><span class="o">(</span>3<span class="o">)</span>: requirements_osx_brew_libs_install libksba openssl
</span><span class='line'>Error: No such keg: /usr/local/Cellar/libksba
</span><span class='line'>Error: Cowardly refusing to <span class="sb">`</span>sudo brew install<span class="sb">`</span>
</span><span class='line'>You can use brew with sudo, but only <span class="k">if </span>the brew executable is owned by root.
</span><span class='line'>However, this is both not recommended and completely unsupported so <span class="k">do </span>so at
</span><span class='line'>your own risk.
</span><span class='line'>There were package installation errors, make sure to <span class="nb">read </span>the log.
</span><span class='line'>
</span><span class='line'>Try <span class="sb">`</span>brew tap --repair<span class="sb">`</span> and make sure <span class="sb">`</span>brew doctor<span class="sb">`</span> looks reasonable.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>看了日志貌似明白了，使用brew安装libksba由于加了sudo所以出问题了。那么直接在命令行使用sudo试试。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>sudo brew install libksba
</span><span class='line'>Error: Cowardly refusing to <span class="sb">`</span>sudo brew install<span class="sb">`</span>
</span><span class='line'>You can use brew with sudo, but only <span class="k">if </span>the brew executable is owned by root.
</span><span class='line'>However, this is both not recommended and completely unsupported so <span class="k">do </span>so at
</span><span class='line'>your own risk.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>窝里个去，不使用sudo吧rvm requirements执行不成功。加上sudo吧rvm requirements调用的brew install又不行。好吧，就按上面说的将brew转换到root模式。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>ls -al /usr/local/bin/brew
</span><span class='line'>-rwxr-xr-x  1 twer  admin  703 Mar 14  2013 /usr/local/bin/brew
</span><span class='line'><span class="nv">$ </span>sudo chown root:admin /usr/local/bin/brew
</span><span class='line'>Password:
</span><span class='line'><span class="nv">$ </span>ls -al /usr/local/bin/brew
</span><span class='line'>-rwxr-xr-x  1 root  admin  703 Mar 14  2013 /usr/local/bin/brew
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>OK。再执行吧。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>sudo rvm requirements
</span><span class='line'>Password:
</span><span class='line'>Checking requirements <span class="k">for </span>osx.
</span><span class='line'>Certificates in <span class="s1">&#39;/usr/local/etc/openssl/cert.pem&#39;</span> already are up to date.
</span><span class='line'>Requirements installation successful.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>搞定。把brew再切换到原来的用户和组。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo chown twer:admin /usr/local/bin/brew
</span></code></pre></td></tr></table></div></figure>


<hr />

<pre><code class="bash">
$ sudo chown twer:admin /usr/local/bin/brew
</code></pre>


<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>绕了一大圈了终于可以安装Ruby了。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$ </span>rvm install 1.9.3
</span><span class='line'>Searching <span class="k">for </span>binary rubies, this might take some time.
</span><span class='line'>No binary rubies available <span class="k">for</span>: osx/10.8/x86_64/ruby-1.9.3-p448.
</span><span class='line'>Continuing with compilation. Please <span class="nb">read</span> <span class="s1">&#39;rvm help mount&#39;</span> to get more information on binary rubies.
</span><span class='line'>Checking requirements <span class="k">for </span>osx.
</span><span class='line'>Certificates in <span class="s1">&#39;/usr/local/etc/openssl/cert.pem&#39;</span> already are up to date.
</span><span class='line'>Requirements installation successful.
</span><span class='line'>Installing Ruby from <span class="nb">source </span>to: /usr/local/rvm/rubies/ruby-1.9.3-p448, this may take a <span class="k">while </span>depending on your cpu<span class="o">(</span>s<span class="o">)</span>...
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#downloading ruby-1.9.3-p448, this may take a while depending on your connection...</span>
</span><span class='line'>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span><span class='line'>                                 Dload  Upload   Total   Spent    Left  Speed
</span><span class='line'>  0     0    0     0    0     0      0      0 --:--:--  0:00:02 --:--:--     0Warning: Failed to create the file ruby-1.9.3-p448.tar.bz2: Permission denied
</span><span class='line'>  0 9816k    0   745    0     0    320      0  8:43:34  0:00:02  8:43:32  2623
</span><span class='line'>curl: <span class="o">(</span>23<span class="o">)</span> Failed writing body <span class="o">(</span>0 !<span class="o">=</span> 745<span class="o">)</span>
</span><span class='line'>There was an error<span class="o">(</span>23<span class="o">)</span>.
</span><span class='line'>Checking fallback: http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.3-p448.tar.bz2
</span><span class='line'>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span><span class='line'>                                 Dload  Upload   Total   Spent    Left  Speed
</span><span class='line'>  0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0Warning: Failed to create the file ruby-1.9.3-p448.tar.bz2: Permission denied
</span><span class='line'>  0 9816k    0  3329    0     0   4578      0  0:36:35 --:--:--  0:36:35  8853
</span><span class='line'>curl: <span class="o">(</span>23<span class="o">)</span> Failed writing body <span class="o">(</span>0 !<span class="o">=</span> 3329<span class="o">)</span>
</span><span class='line'>There was an error<span class="o">(</span>23<span class="o">)</span>.
</span><span class='line'>Failed download
</span><span class='line'>There has been an error fetching the ruby interpreter. Halting the installation.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>又有错。走到这步上了，继续解决吧。经过分析貌似是下载文件有问题，可能又是权限问题。</p>

<p>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;bash&quot;</span>&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>sudo rvm install 1.9.3
</span><span class='line'>Password:
</span><span class='line'>Searching <span class="k">for </span>binary rubies, this might take some time.
</span><span class='line'>No binary rubies available <span class="k">for</span>: osx/10.8/x86_64/ruby-1.9.3-p448.
</span><span class='line'>Continuing with compilation. Please <span class="nb">read</span> <span class="s1">&#39;rvm help mount&#39;</span> to get more information on binary rubies.
</span><span class='line'>Checking requirements <span class="k">for </span>osx.
</span><span class='line'>Certificates in <span class="s1">&#39;/usr/local/etc/openssl/cert.pem&#39;</span> already are up to date.
</span><span class='line'>Requirements installation successful.
</span><span class='line'>Installing Ruby from <span class="nb">source </span>to: /usr/local/rvm/rubies/ruby-1.9.3-p448, this may take a <span class="k">while </span>depending on your cpu<span class="o">(</span>s<span class="o">)</span>...
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#downloading ruby-1.9.3-p448, this may take a while depending on your connection...</span>
</span><span class='line'>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span><span class='line'>                                 Dload  Upload   Total   Spent    Left  Speed
</span><span class='line'>100 9816k  100 9816k    0     0   422k      0  0:00:23  0:00:23 --:--:--  154k
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#extracting ruby-1.9.3-p448 to /usr/local/rvm/src/ruby-1.9.3-p448</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#extracted to /usr/local/rvm/src/ruby-1.9.3-p448</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#configuring...............................................................................................................................................................................................................................................................................................................................................................................................................................................................................</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#post-configuration</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#compiling...............................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................................</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#installing.........................................................................................................</span>
</span><span class='line'>curl: <span class="o">(</span>35<span class="o">)</span> Unknown SSL protocol error in connection to rubygems.org:443
</span><span class='line'>There was an error <span class="k">while </span>trying to resolve rubygems version <span class="k">for</span> <span class="s1">&#39;latest&#39;</span>.
</span><span class='line'>Halting the installation.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<hr />

<p></code></pre></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<p>前面那个错没了，但是新来了一个错。貌似是ssh到rubygems.org网站有问题，突然想起在rvm requirements时安装了openssl，应该是ssl设置的问题。从网上查了下，貌似要重置macport。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo rm -rf /opt/local
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>sudo rm -rf <span class="nv">$rvm_path</span>/usr
</span><span class='line'><span class="nv">$ </span>sudo rm -rf <span class="nv">$rvm_path</span>/bin/port
</span><span class='line'>sudo: cannot get working directory
</span><span class='line'><span class="nv">$ </span>sudo rvm autolibs homebrew
</span><span class='line'>
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span></code></pre></td></tr></table></div></figure>


<p>最后，再重新安装Ruby。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo rvm reinstall 1.9.3
</span><span class='line'>Removing /usr/local/rvm/src/ruby-1.9.3-p448...
</span><span class='line'>Removing /usr/local/rvm/rubies/ruby-1.9.3-p448...
</span><span class='line'><span class="o">=======</span>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;
</span><span class='line'>最后，再重新安装Ruby。
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;<span class="nv">$ </span>sudo rvm reinstall 1.9.3
</span><span class='line'>Removing /usr/local/rvm/src/ruby-1.9.3-p448&amp;hellip;
</span><span class='line'>Removing /usr/local/rvm/rubies/ruby-1.9.3-p448&amp;hellip;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>Searching <span class="k">for </span>binary rubies, this might take some time.
</span><span class='line'>No binary rubies available <span class="k">for</span>: osx/10.8/x86_64/ruby-1.9.3-p448.
</span><span class='line'>Continuing with compilation. Please <span class="nb">read</span> &amp;lsquo;rvm <span class="nb">help </span>mount&amp;rsquo; to get more information on binary rubies.
</span><span class='line'>Checking requirements <span class="k">for </span>osx_brew.
</span><span class='line'>Certificates in &amp;lsquo;/usr/local/etc/openssl/cert.pem&amp;rsquo; already are up to date.
</span><span class='line'>Requirements installation successful.
</span><span class='line'>Installing Ruby from <span class="nb">source </span>to: /usr/local/rvm/rubies/ruby-1.9.3-p448, this may take a <span class="k">while </span>depending on your cpu<span class="o">(</span>s<span class="o">)</span>&amp;hellip;
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#downloading ruby-1.9.3-p448, this may take a while depending on your connection&amp;hellip;</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#extracting ruby-1.9.3-p448 to /usr/local/rvm/src/ruby-1.9.3-p448</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#extracted to /usr/local/rvm/src/ruby-1.9.3-p448</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#configuring&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;.</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#post-configuration</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#compiling&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;..</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#installing&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;</span>
</span><span class='line'>Retrieving rubygems-2.1.4
</span><span class='line'>  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
</span><span class='line'>                                 Dload  Upload   Total   Spent    Left  Speed
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span><span class='line'>100  356k  100  356k    0     0  11672      0  0:00:31  0:00:31 --:--:-- 20611
</span><span class='line'>Extracting rubygems-2.1.4 ...
</span><span class='line'>Removing old Rubygems files...
</span><span class='line'><span class="o">=======</span>
</span><span class='line'>100  356k  100  356k    0     0  11672      0  0:00:31  0:00:31 &amp;ndash;:&amp;ndash;:&amp;ndash; 20611
</span><span class='line'>Extracting rubygems-2.1.4 &amp;hellip;
</span><span class='line'>Removing old Rubygems files&amp;hellip;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'><span class="nv">$LANG</span> was empty, setting up <span class="nv">LANG</span><span class="o">=</span>en_US, <span class="k">if </span>it fails again try setting LANG to something sane and try again.
</span><span class='line'>Installing rubygems-2.1.4 <span class="k">for </span>ruby-1.9.3-p448&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;..
</span><span class='line'>Installation of rubygems completed successfully.
</span><span class='line'><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span>&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown
</span><span class='line'>Saving wrappers to <span class="s1">&#39;/usr/local/rvm/wrappers/ruby-1.9.3-p448&#39;</span>........
</span><span class='line'>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#adjusting #shebangs for (gem irb erb ri rdoc testrb rake).</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#importing default gemsets, this may take time.......................</span>
</span><span class='line'>Install of ruby-1.9.3-p448 - <span class="c">#complete</span>
</span><span class='line'>Making gemset ruby-1.9.3-p448 pristine....
</span><span class='line'>Making gemset ruby-1.9.3-p448@global pristine....
</span></code></pre></td></tr></table></div></figure>


<p>终于安装上了。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">=======</span>
</span><span class='line'>Saving wrappers to &amp;lsquo;/usr/local/rvm/wrappers/ruby-1.9.3-p448&amp;rsquo;&amp;hellip;&amp;hellip;..&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;ruby-1.9.3-p448 - <span class="c">#adjusting #shebangs for (gem irb erb ri rdoc testrb rake).</span>
</span><span class='line'>ruby-1.9.3-p448 - <span class="c">#importing default gemsets, this may take time&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;&amp;hellip;..</span>
</span><span class='line'>Install of ruby-1.9.3-p448 - <span class="c">#complete</span>
</span><span class='line'>Making gemset ruby-1.9.3-p448 pristine&amp;hellip;.
</span><span class='line'>Making gemset ruby-1.9.3-p448@global pristine&amp;hellip;.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;pre&gt;&lt;code&gt;
</span><span class='line'>终于安装上了。
</span><span class='line'>&lt;/code&gt;&lt;/pre&gt;
</span><span class='line'>&gt;&gt;&gt;&gt;&gt;&gt;&gt; b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rvm list
</span><span class='line'>
</span><span class='line'>rvm rubies
</span><span class='line'>
</span><span class='line'>   ruby-1.9.2-p320 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'> * ruby-1.9.3-p194 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'><span class="o">=</span>&gt; ruby-1.9.3-p448 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># =&gt; - current</span>
</span><span class='line'><span class="c"># =* - current &amp;&amp; default</span>
</span><span class='line'><span class="c">#  * - default</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>rvm use ruby-1.9.3-p448
</span><span class='line'><span class="nv">$ </span>rvm list
</span><span class='line'>
</span><span class='line'>rvm rubies
</span><span class='line'>
</span><span class='line'>   ruby-1.9.2-p320 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'> * ruby-1.9.3-p194 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'><span class="o">=</span>&gt; ruby-1.9.3-p448 <span class="o">[</span> x86_64 <span class="o">]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># =&gt; - current</span>
</span><span class='line'><span class="c"># =* - current &amp;&amp; default</span>
</span><span class='line'><span class="c">#  * - default</span>
</span><span class='line'>
</span><span class='line'><span class="nv">$ </span>vagrant up
</span><span class='line'>Bringing machine <span class="s1">&#39;default&#39;</span> up with <span class="s1">&#39;virtualbox&#39;</span> provider...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> VirtualBox VM is already running.
</span></code></pre></td></tr></table></div></figure>


<p>终于将Ruby升级到1.9.3-p448了。回顾这整个过程，都是泪啊。本来是想装个虚拟机玩玩，哪想到惹出这么多事情来。不过好歹问题是解决了。</p>

<h1>&lt;&lt;&lt;&lt;&lt;&lt;&lt; HEAD:source/_posts/2013-09-23-not-easy-to-install-ruby.markdown</h1>

<p>$ vagrant up
Bringing machine &lsquo;default&rsquo; up with &lsquo;virtualbox&rsquo; provider&hellip;
[default] VirtualBox VM is already running.</p>


<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>b3de9a0dc5638d86b43bb607c665e95f3c151147:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>

<hr />

<!-- more -->




<p>从这个异常中我们可以看到，由于我在自己机器上已经安装了rake的<code>10.0.0</code>版本，但是这个项目中配置的rake版本却是<code>0.9.2.2</code>，所以在执行rake命令时应该使用Gemfile的。</p>




<p>而<code>bundle exec</code>可以在当前bundle的上下文中执行一段脚本。通过它可以调用本项目中指定的rake版本来执行命令。</p>




<p>下面是官方文档的说明。</p>




<blockquote><p>In some cases, running executables without bundle exec may work, if the executable happens to be installed in your system and does not pull in any gems that conflict with your bundle. However, this is unreliable and is the source of considerable pain. Even if it looks like it works, it may not work in the future or on another machine.</p></blockquote>




<p>所以我们只要每次执行命令的时候加上<code>bundle exec</code>的前缀就可以额。但是这样搞的很烦人，试想每天都要敲上百次这样的字符，而且还常常忘记。</p>




<p>有一个方法可以避免每次都要键入<code>bundle exec</code>作为前缀。</p>




<p>安装<a href="https://github.com/mpapis/rubygems-bundler">rubygems-bundler</a>。
<code>bash
$ gem install rubygems-bundler
</code>
然后运行：
<code>bash
$ gem regenerate_binstubs
</code></p>




<p>启用RVM hook:
<code>bash
$ rvm get head &amp;&amp; rvm reload
$ chmod +x $rvm_path/hooks/after_cd_bundler
</code>
为自己的项目创建bundler stubs.
<code>bash
$ cd your_project_path
$ bundle install --binstubs=./bundler_stubs
</code></p>




<p>最后重新打开terminal就可以直接执行ruby命令，不需要加上<code>bundler exec</code>前缀。</p>




<p>如果想禁用次bundler的话，只需要在命令前面加上<code>NOEXEC_DISABLE=1</code>前缀。更详细的信息可以看[rubygems-bundler]的<a href="https://github.com/mpapis/rubygems-bundler">文档</a>。</p>


<p>]]></content>
  </entry></p>

<p></feed></p>

<blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><blockquote><p>09615b67c1384817f01948313cc9bfa79d82b402:blog/tags/ruby/atom.xml</p></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote></blockquote>
